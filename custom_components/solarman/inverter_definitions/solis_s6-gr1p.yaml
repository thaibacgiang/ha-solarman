# Power Master / Hinen 6.0K-SL
# Device Code: 3501
# VERIFIED Solarman register map (10–200)
# Confirmed by real device data

info:
  manufacturer: Power Master
  model: 6.0K-SL
  device_code: 3501
  phase: single
  type: hybrid

default:
  update_interval: 30
  code: 0x03
  digits: 2

parameters:

# =====================
# DEVICE
# =====================
  - group: Device
    update_interval: 5
    items:
      - name: Device State
        class: enum
        rule: 1
        registers: [59]
        lookup:
          - key: 0
            value: Stand-by
          - key: 1
            value: Grid-connected
          - key: 2
            value: Off-grid
          - key: 3
            value: Fault
          - key: 4
            value: Charging
          - key: 5
            value: Discharging

      - name: Inverter Temperature
        class: temperature
        state_class: measurement
        uom: "°C"
        scale: 0.1
        rule: 1
        registers: [91]

# =====================
# GRID / AC
# =====================
  - group: AC
    update_interval: 5
    items:
      - name: Grid Voltage
        class: voltage
        state_class: measurement
        uom: V
        scale: 0.1
        rule: 1
        registers: [67]

      - name: Grid Current
        class: current
        state_class: measurement
        uom: A
        scale: 0.1
        rule: 1
        registers: [76]

      - name: Grid Frequency
        class: frequency
        state_class: measurement
        uom: Hz
        scale: 0.01
        rule: 1
        registers: [79]

      - name: Load Power
        class: power
        state_class: measurement
        uom: W
        scale: 0.1
        rule: 2
        registers: [86, 87]
        icon: mdi:home-lightning-bolt

# =====================
# PV
# =====================
  - group: PV
    update_interval: 5
    items:
      - name: PV Power
        class: power
        state_class: measurement
        uom: W
        scale: 0.1
        rule: 2
        registers: [82, 83]
        icon: mdi:solar-power

      - name: PV1 Voltage
        class: voltage
        state_class: measurement
        uom: V
        scale: 0.1
        rule: 1
        registers: [109]

      - name: PV1 Current
        class: current
        state_class: measurement
        uom: A
        scale: 0.1
        rule: 1
        registers: [110]

      - name: PV2 Voltage
        class: voltage
        state_class: measurement
        uom: V
        scale: 0.1
        rule: 1
        registers: [111]

      - name: PV2 Current
        class: current
        state_class: measurement
        uom: A
        scale: 0.1
        rule: 1
        registers: [112]

# =====================
# BATTERY
# =====================
  - group: Battery
    update_interval: 5
    items:
      - name: Battery SOC
        class: battery
        state_class: measurement
        uom: "%"
        rule: 1
        registers: [184]

      - name: Battery Temperature
        class: temperature
        state_class: measurement
        uom: "°C"
        scale: 0.1
        rule: 1
        registers: [182]

      - name: Battery Voltage
        class: voltage
        state_class: measurement
        uom: V
        scale: 0.01
        rule: 1
        registers: [183]

      - name: Battery Current
        class: current
        state_class: measurement
        uom: A
        scale: 0.01
        rule: 1
        registers: [191]

      - name: Battery Power
        class: power
        state_class: measurement
        uom: W
        rule: 1
        registers: [190]

# =====================
# ENERGY
# =====================
  - group: Energy
    update_interval: 30
    items:
      - name: Today PV Production
        class: energy
        state_class: total_increasing
        uom: kWh
        scale: 0.1
        rule: 1
        registers: [124]

      - name: Total PV Production
        class: energy
        state_class: total_increasing
        uom: kWh
        scale: 0.1
        rule: 2
        registers: [96, 97]

      - name: Today Load Consumption
        class: energy
        state_class: total_increasing
        uom: kWh
        scale: 0.1
        rule: 1
        registers: [84]

      - name: Total Load Consumption
        class: energy
        state_class: total_increasing
        uom: kWh
        scale: 0.1
        rule: 2
        registers: [85, 86]

      - name: Today Energy Import
        class: energy
        state_class: total_increasing
        uom: kWh
        scale: 0.1
        rule: 1
        registers: [76]

      - name: Total Energy Import
        class: energy
        state_class: total_increasing
        uom: kWh
        scale: 0.1
        rule: 2
        registers: [80, 81]

      - name: Today Energy Export
        class: energy
        state_class: total_increasing
        uom: kWh
        scale: 0.1
        rule: 1
        registers: [77]

      - name: Total Energy Export
        class: energy
        state_class: total_increasing
        uom: kWh
        scale: 0.1
        rule: 2
        registers: [98, 99]
