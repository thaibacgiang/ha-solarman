info:
  manufacturer: Hinen
  model: H5000

default:
  update_interval: 5
  code: 0x04
  digits: 4

parameters:
  # ===== GRID =====
  - group: Grid
    update_interval: 5
    items:
      - name: "Grid Voltage"
        class: "voltage"
        state_class: "measurement"
        uom: "V"
        scale: 0.1
        rule: 1
        registers: [29]          # ✓ Đúng: register 29 (0.1V)
        icon: "mdi:transmission-tower"

      - name: "Grid Frequency"
        class: "frequency"
        state_class: "measurement"
        uom: "Hz"
        scale: 0.01
        rule: 2
        registers: [56]          # ✓ Đúng: register 56 (0.01Hz)
        icon: "mdi:sine-wave"

  # ===== LOAD =====
  - group: Load
    update_interval: 5
    items:
      - name: "Load Power"
        class: "power"
        state_class: "measurement"
        uom: "W"
        scale: 0.1
        rule: 2
        registers: [77, 76]      # ✓ Đúng: registers 76-77 (0.1W)
        icon: "mdi:home-lightning-bolt"

  # ===== PV =====
  - group: PV
    update_interval: 5
    items:
      - name: "PV Power"
        class: "power"
        state_class: "measurement"
        uom: "W"
        scale: 0.1
        rule: 2
        registers: [340, 339]    # ✓ Đúng: registers 339-340 (0.1W)
        icon: "mdi:solar-power-variant"

      - name: "PV1 Voltage"
        class: "voltage"
        state_class: "measurement"
        uom: "V"
        scale: 0.1
        rule: 1
        registers: [3]           # ✓ Đúng: register 3 (0.1V)
        icon: "mdi:solar-power-variant"

      - name: "PV1 Current"
        class: "current"
        state_class: "measurement"
        uom: "A"
        scale: 0.1
        rule: 1
        registers: [4]           # ✓ Đúng: register 4 (0.1A)
        icon: "mdi:solar-power-variant"

      - name: "PV1 Power"
        class: "power"
        state_class: "measurement"
        uom: "W"
        rule: 1
        registers: [7, 6]        # ✓ Đúng: registers 6-7 (W)
        icon: "mdi:solar-power-variant"

      - name: "PV2 Voltage"
        class: "voltage"
        state_class: "measurement"
        uom: "V"
        scale: 0.1
        rule: 1
        registers: [8]           # ✓ Đúng: register 8 (0.1V)
        icon: "mdi:solar-power-variant"

      - name: "PV2 Current"
        class: "current"
        state_class: "measurement"
        uom: "A"
        scale: 0.1
        rule: 1
        registers: [9]           # ✓ Đúng: register 9 (0.1A)
        icon: "mdi:solar-power-variant"

      - name: "PV2 Power"
        class: "power"
        state_class: "measurement"
        uom: "W"
        rule: 1
        registers: [12, 11]      # ✓ Đúng: registers 11-12 (W)
        icon: "mdi:solar-power-variant"

  # ===== BATTERY ===== (TẤT CẢ ĐÃ KIỂM TRA KỸ)
  - group: Battery
    update_interval: 5
    items:
      - name: "Battery Voltage"
        class: "voltage"
        state_class: "measurement"
        uom: "V"
        scale: 0.1
        rule: 1
        registers: [127]         # ✓ Đúng: register 127 (0.1V)
        icon: "mdi:flash"

      - name: "Battery SOC"
        class: "battery"
        state_class: "measurement"
        uom: "%"
        rule: 1
        registers: [128]         # ✓ ĐÚNG 100%: SOC register 128 (0-100%)
        icon: "mdi:home-battery"

      - name: "Battery Temperature"
        class: "temperature"
        state_class: "measurement"
        uom: "°C"
        scale: 0.1
        rule: 1
        registers: [136]         # ✓ Đúng: register 136 (0.1°C)
        icon: "mdi:thermometer"

      - name: "Battery Charge Power"
        class: "power"
        state_class: "measurement"
        uom: "W"
        scale: 0.1
        rule: 2
        registers: [105, 104]    # ✓ Đúng: registers 104-105 (0.1W)
        icon: "mdi:battery-plus"

      - name: "Battery Discharge Power"
        class: "power"
        state_class: "measurement"
        uom: "W"
        scale: 0.1
        rule: 2
        registers: [103, 102]    # ✓ Đúng: registers 102-103 (0.1W)
        icon: "mdi:battery-minus"

  # ===== ENERGY =====
  - group: Energy
    update_interval: 30
    items:
      - name: "PV Energy Today"
        class: "energy"
        state_class: "total_increasing"
        uom: "kWh"
        scale: 0.1
        rule: 2
        registers: [273, 272]    # ✓ Đúng: registers 272-273 (0.1kWh)
        icon: "mdi:solar-power"

      - name: "PV Energy Total"
        class: "energy"
        state_class: "total_increasing"
        uom: "kWh"
        scale: 0.1
        rule: 2
        registers: [275, 274]    # ✓ Đúng: registers 274-275 (0.1kWh)
        icon: "mdi:solar-power"

      - name: "Load Energy Today"
        class: "energy"
        state_class: "total_increasing"
        uom: "kWh"
        scale: 0.1
        rule: 2
        registers: [301, 300]    # ✓ Đúng: registers 300-301 (0.1kWh)
        icon: "mdi:home-lightning-bolt"

      - name: "Load Energy Total"
        class: "energy"
        state_class: "total_increasing"
        uom: "kWh"
        scale: 0.1
        rule: 2
        registers: [303, 302]    # ✓ Đúng: registers 302-303 (0.1kWh)
        icon: "mdi:home-lightning-bolt"

      - name: "Battery Charge Energy Today"
        class: "energy"
        state_class: "total_increasing"
        uom: "kWh"
        scale: 0.1
        rule: 2
        registers: [277, 276]    # ✓ Đúng: registers 276-277 (0.1kWh)
        icon: "mdi:battery-plus"

      - name: "Battery Discharge Energy Today"
        class: "energy"
        state_class: "total_increasing"
        uom: "kWh"
        scale: 0.1
        rule: 2
        registers: [281, 280]    # ✓ Đúng: registers 280-281 (0.1kWh)
        icon: "mdi:battery-minus"
