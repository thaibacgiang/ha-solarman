# Power Master / Hinen 6.0K-SL
# Device Code: 3501
# Solarman protocol lookup
# Author: ChatGPT (custom for Do Thai)
# Base: deye_hybrid (adjusted scale & registers)

info:
  manufacturer: Power Master
  model: 6.0K-SL
  device_code: 3501
  phase: single
  type: hybrid

default:
  update_interval: 30
  code: 0x03
  digits: 2

parameters:

  # =====================
  # STATUS
  # =====================
  inverter_status:
    name: Inverter Status
    register: 73
    scale: 1
    unit: ""
    icon: mdi:power
    mapping:
      0: Off
      1: Standby
      2: Starting
      3: Running

  work_mode:
    name: Work Mode
    register: 74
    scale: 1
    unit: ""
    mapping:
      0: Unknown
      1: Grid
      2: Battery
      3: Hybrid

  # =====================
  # GRID / AC
  # =====================
  grid_frequency:
    name: Grid Frequency
    register: 89
    scale: 0.01
    unit: Hz
    device_class: frequency
    state_class: measurement

  ac_output_power:
    name: AC Output Power
    register: 67
    scale: 1
    unit: W
    device_class: power
    state_class: measurement

  load_power:
    name: Load Power
    register: 71
    scale: 1
    unit: W
    device_class: power
    state_class: measurement

  # =====================
  # PV
  # =====================
  pv_power:
    name: PV Power
    register: 68
    scale: 1
    unit: W
    device_class: power
    state_class: measurement

  # =====================
  # BATTERY
  # =====================
  battery_voltage:
    name: Battery Voltage
    register: 69
    scale: 0.1
    unit: V
    device_class: voltage
    state_class: measurement

  battery_current:
    name: Battery Current
    register: 107
    scale: 0.1
    unit: A
    device_class: current
    state_class: measurement

  battery_soc:
    name: Battery SOC
    register: 120
    scale: 1
    unit: "%"
    device_class: battery
    state_class: measurement

  # =====================
  # TEMPERATURE
  # =====================
  inverter_temperature:
    name: Inverter Temperature
    register: 99
    scale: 0.1
    unit: Â°C
    device_class: temperature
    state_class: measurement

  # =====================
  # ENERGY
  # =====================
  daily_energy:
    name: Daily Energy
    register: 124
    scale: 0.001
    unit: kWh
    device_class: energy
    state_class: total_increasing

  total_energy:
    name: Total Energy
    register: 123
    scale: 0.001
    unit: kWh
    device_class: energy
    state_class: total_increasing
