info:
  manufacturer: Hinen
  model: H5000

default:
  update_interval: 5
  code: 0x04
  digits: 4

parameters:
  # ===== DEVICE STATUS =====
  - group: Device_Status
    update_interval: 5
    items:
      - name: "Device State"
        class: "enum"
        rule: 1
        registers: [0]
        icon: "mdi:state-machine"
        lookup:
          - key: 0
            value: "Stand-by"
          - key: 1
            value: "Grid-connected"
          - key: 2
            value: "Off-grid"
          - key: 3
            value: "FAULT"
          - key: 4
            value: "Update mode"
          - key: 5
            value: "Charging"
          - key: 6
            value: "Discharging"
          - key: 7
            value: "Bypass"

      - name: "Inverter Temperature"
        class: "temperature"
        state_class: "measurement"
        uom: "°C"
        scale: 0.1
        rule: 1
        registers: [132]
        icon: "mdi:thermometer"

  # ===== AC SYSTEM (42-80) =====
  - group: AC_System
    update_interval: 5
    items:
      - name: "Grid Voltage"
        class: "voltage"
        state_class: "measurement"
        uom: "V"
        scale: 0.1
        rule: 1
        registers: [67]           # Trong khoảng 42-80
        icon: "mdi:transmission-tower"

      - name: "Grid Current"
        class: "current"
        state_class: "measurement"
        uom: "A"
        scale: 0.1
        rule: 1
        registers: [68]           # Trong khoảng 42-80
        icon: "mdi:current-ac"

      - name: "Grid Frequency"
        class: "frequency"
        state_class: "measurement"
        uom: "Hz"
        scale: 0.01
        rule: 1
        registers: [79]           # Trong khoảng 42-80
        icon: "mdi:sine-wave"

      - name: "Grid Power"
        class: "power"
        state_class: "measurement"
        uom: "W"
        rule: 1
        registers: [69]           # Trong khoảng 42-80
        icon: "mdi:transmission-tower"

      - name: "Load Voltage"
        class: "voltage"
        state_class: "measurement"
        uom: "V"
        scale: 0.1
        rule: 1
        registers: [72]           # Trong khoảng 42-80
        icon: "mdi:home-lightning-bolt"

      - name: "Load Current"
        class: "current"
        state_class: "measurement"
        uom: "A"
        scale: 0.1
        rule: 1
        registers: [73]           # Trong khoảng 42-80
        icon: "mdi:current-ac"

      - name: "Load Frequency"
        class: "frequency"
        state_class: "measurement"
        uom: "Hz"
        scale: 0.01
        rule: 1
        registers: [74]           # Trong khoảng 42-80
        icon: "mdi:sine-wave"

      - name: "Load Power"
        class: "power"
        state_class: "measurement"
        uom: "W"
        rule: 1
        registers: [75]           # Trong khoảng 42-80
        icon: "mdi:home-lightning-bolt"

  # ===== BATTERY SYSTEM (128-158) =====
  - group: Battery_System
    update_interval: 5
    items:
      - name: "Battery Voltage"
        class: "voltage"
        state_class: "measurement"
        uom: "V"
        scale: 0.1
        rule: 1
        registers: [128]           # Trong khoảng 128-158
        icon: "mdi:flash"

      - name: "Battery Current"
        class: "current"
        state_class: "measurement"
        uom: "A"
        scale: 0.1
        rule: 1
        registers: [129]           # Trong khoảng 128-158
        icon: "mdi:current-dc"

      - name: "Battery Power"
        class: "power"
        state_class: "measurement"
        uom: "W"
        rule: 1
        registers: [130]           # Trong khoảng 128-158
        icon: "mdi:battery"

      - name: "Battery SOC"
        class: "battery"
        state_class: "measurement"
        uom: "%"
        rule: 1
        registers: [131]           # Trong khoảng 128-158
        icon: "mdi:home-battery"

      - name: "Battery Temperature"
        class: "temperature"
        state_class: "measurement"
        uom: "°C"
        scale: 0.1
        rule: 1
        registers: [132]           # Trong khoảng 128-158
        icon: "mdi:thermometer"

      - name: "Battery Charge Current"
        class: "current"
        state_class: "measurement"
        uom: "A"
        scale: 0.1
        rule: 1
        registers: [133]           # Trong khoảng 128-158
        icon: "mdi:battery-plus"

      - name: "Battery Discharge Current"
        class: "current"
        state_class: "measurement"
        uom: "A"
        scale: 0.1
        rule: 1
        registers: [134]           # Trong khoảng 128-158
        icon: "mdi:battery-minus"

      - name: "Battery Charge Power"
        class: "power"
        state_class: "measurement"
        uom: "W"
        rule: 1
        registers: [135]           # Trong khoảng 128-158
        icon: "mdi:battery-plus"

      - name: "Battery Discharge Power"
        class: "power"
        state_class: "measurement"
        uom: "W"
        rule: 1
        registers: [136]           # Trong khoảng 128-158
        icon: "mdi:battery-minus"

  # ===== PV SYSTEM (85-120) =====
  - group: PV_System
    update_interval: 5
    items:
      - name: "PV1 Voltage"
        class: "voltage"
        state_class: "measurement"
        uom: "V"
        scale: 0.1
        rule: 1
        registers: [85]           # Trong khoảng 85-120
        icon: "mdi:solar-power-variant"

      - name: "PV1 Current"
        class: "current"
        state_class: "measurement"
        uom: "A"
        scale: 0.1
        rule: 1
        registers: [86]           # Trong khoảng 85-120
        icon: "mdi:solar-power-variant"

      - name: "PV1 Power"
        class: "power"
        state_class: "measurement"
        uom: "W"
        rule: 1
        registers: [87]           # Trong khoảng 85-120
        icon: "mdi:solar-power-variant"

      - name: "PV2 Voltage"
        class: "voltage"
        state_class: "measurement"
        uom: "V"
        scale: 0.1
        rule: 1
        registers: [88]           # Trong khoảng 85-120
        icon: "mdi:solar-power-variant"

      - name: "PV2 Current"
        class: "current"
        state_class: "measurement"
        uom: "A"
        scale: 0.1
        rule: 1
        registers: [89]           # Trong khoảng 85-120
        icon: "mdi:solar-power-variant"

      - name: "PV2 Power"
        class: "power"
        state_class: "measurement"
        uom: "W"
        rule: 1
        registers: [90]           # Trong khoảng 85-120
        icon: "mdi:solar-power-variant"

      - name: "PV Total Power"
        class: "power"
        state_class: "measurement"
        uom: "W"
        rule: 1
        registers: [91]           # Trong khoảng 85-120
        icon: "mdi:solar-power-variant"

  # ===== ENERGY METERING =====
  - group: Energy_Metering
    update_interval: 30
    items:
      - name: "Today PV Energy"
        class: "energy"
        state_class: "total_increasing"
        uom: "kWh"
        scale: 0.1
        rule: 1
        registers: [140]           # Năng lượng PV ngày
        icon: "mdi:solar-power"

      - name: "Total PV Energy"
        class: "energy"
        state_class: "total_increasing"
        uom: "kWh"
        scale: 0.1
        rule: 2
        registers: [141]           # Năng lượng PV tổng
        icon: "mdi:solar-power"

      - name: "Today Load Energy"
        class: "energy"
        state_class: "total_increasing"
        uom: "kWh"
        scale: 0.1
        rule: 1
        registers: [142]           # Năng lượng tải ngày
        icon: "mdi:home-lightning-bolt"

      - name: "Total Load Energy"
        class: "energy"
        state_class: "total_increasing"
        uom: "kWh"
        scale: 0.1
        rule: 2
        registers: [143]           # Năng lượng tải tổng
        icon: "mdi:home-lightning-bolt"

      - name: "Today Battery Charge"
        class: "energy"
        state_class: "total_increasing"
        uom: "kWh"
        scale: 0.1
        rule: 1
        registers: [144]           # Năng lượng sạc pin ngày
        icon: "mdi:battery-plus"

      - name: "Total Battery Charge"
        class: "energy"
        state_class: "total_increasing"
        uom: "kWh"
        scale: 0.1
        rule: 2
        registers: [145]           # Năng lượng sạc pin tổng
        icon: "mdi:battery-plus"

      - name: "Today Battery Discharge"
        class: "energy"
        state_class: "total_increasing"
        uom: "kWh"
        scale: 0.1
        rule: 1
        registers: [146]           # Năng lượng xả pin ngày
        icon: "mdi:battery-minus"

      - name: "Total Battery Discharge"
        class: "energy"
        state_class: "total_increasing"
        uom: "kWh"
        scale: 0.1
        rule: 2
        registers: [147]           # Năng lượng xả pin tổng
        icon: "mdi:battery-minus"

      - name: "Today Grid Import"
        class: "energy"
        state_class: "total_increasing"
        uom: "kWh"
        scale: 0.1
        rule: 1
        registers: [148]           # Năng lượng nhập lưới ngày
        icon: "mdi:transmission-tower-import"

      - name: "Total Grid Import"
        class: "energy"
        state_class: "total_increasing"
        uom: "kWh"
        scale: 0.1
        rule: 2
        registers: [149]           # Năng lượng nhập lưới tổng
        icon: "mdi:transmission-tower-import"

      - name: "Today Grid Export"
        class: "energy"
        state_class: "total_increasing"
        uom: "kWh"
        scale: 0.1
        rule: 1
        registers: [150]           # Năng lượng xuất lưới ngày
        icon: "mdi:transmission-tower-export"

      - name: "Total Grid Export"
        class: "energy"
        state_class: "total_increasing"
        uom: "kWh"
        scale: 0.1
        rule: 2
        registers: [151]           # Năng lượng xuất lưới tổng
        icon: "mdi:transmission-tower-export"
